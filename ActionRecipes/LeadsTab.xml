<!-- This was an example page to help understnad actions.  It mostly just does lead detail popup and new lead popup and lots of redirects. -->

<skuidpage showsidebar="false" showheader="true" tabtooverride="" unsavedchangeswarning="yes">
   <models>
      <model id="RunningUser" limit="1" query="true" createrowifnonefound="false" sobject="User">
         <fields>
            <field id="Name"/>
         </fields>
         <conditions>
            <condition type="userinfo" value="" field="Id" operator="=" enclosevalueinquotes="true" userinfotype="userid"/>
         </conditions>
         <actions/>
      </model>
      <model id="LeadData" limit="100" query="true" createrowifnonefound="false" sobject="Lead" orderby="CreatedDate DESC">
         <fields>
            <field id="FirstName"/>
            <field id="LastName"/>
            <field id="Company"/>
            <field id="CreatedDate"/>
            <field id="State"/>
            <field id="Email"/>
            <field id="Status"/>
            <field id="Phone"/>
            <field id="Id"/>
            <field id="LeadSource"/>
            <field id="LastActivityDate"/>
            <field id="Rating"/>
            <field id="OwnerId"/>
            <field id="Owner.Name"/>
            <field id="IsUnreadByOwner"/>
            <field id="Name"/>
            <field id="Tasks" type="childRelationship" limit="1">
               <conditions>
                  <condition enclosevalueinquotes="false" operator="=" type="fieldvalue" field="IsClosed" value="false"/>
               </conditions>
            </field>
         </fields>
         <conditions>
            <condition type="fieldvalue" value="false" enclosevalueinquotes="false" field="IsConverted"/>
            <condition type="userinfo" value="" field="OwnerId" operator="=" enclosevalueinquotes="true" userinfotype="userid" state="filterableoff" inactive="true" name="Owner is me"/>
            <condition type="fieldvalue" value="" enclosevalueinquotes="true" field="Status" state="filterableoff" inactive="true" name="Status"/>
            <condition type="fieldvalue" value="" enclosevalueinquotes="true" field="LeadSource" state="filterableoff" inactive="true" name="Lead Source"/>
            <condition type="fieldvalue" value="" enclosevalueinquotes="true" field="Rating" operator="=" state="filterableoff" inactive="true" name="Rating"/>
            <condition type="fieldvalue" value="" enclosevalueinquotes="false" field="IsUnreadByOwner" state="filterableoff" inactive="true" name="IsUnreadByOwner"/>
            <condition type="fieldvalue" value="TODAY" enclosevalueinquotes="false" field="CreatedDate" state="filterableoff" inactive="true" name="Today's Leads"/>
            <condition type="fieldvalue" value="THIS_WEEK" enclosevalueinquotes="false" field="CreatedDate" state="filterableoff" inactive="true" name="Leads This Week"/>
            <condition type="fieldvalue" value="THIS_MONTH" enclosevalueinquotes="false" field="CreatedDate" state="filterableoff" inactive="true" name="Leads This Month"/>
            <condition type="fieldvalue" value="THIS_QUARTER" enclosevalueinquotes="false" field="CreatedDate" state="filterableoff" inactive="true" name="Leads This Quarter"/>
            <condition type="fieldvalue" value="THIS_YEAR" enclosevalueinquotes="false" field="CreatedDate" state="filterableoff" inactive="true" name="Leads This Year"/>
            <condition type="fieldvalue" value="THIS_FISCAL_YEAR" enclosevalueinquotes="false" field="CreatedDate" state="filterableoff" inactive="true" name="Leads This Fiscal Year"/>
         </conditions>
         <actions/>
      </model>
      <model id="NewLead" limit="1" query="false" createrowifnonefound="false" sobject="Lead">
         <fields>
            <field id="OwnerId"/>
            <field id="Owner.Name"/>
            <field id="FirstName"/>
            <field id="LastName"/>
            <field id="Company"/>
            <field id="Title"/>
            <field id="LeadSource"/>
            <field id="Industry"/>
            <field id="AnnualRevenue"/>
            <field id="Phone"/>
            <field id="MobilePhone"/>
            <field id="Fax"/>
            <field id="Email"/>
            <field id="Website"/>
            <field id="Status"/>
            <field id="Rating"/>
            <field id="NumberOfEmployees"/>
            <field id="Street"/>
            <field id="City"/>
            <field id="State"/>
            <field id="PostalCode"/>
            <field id="Country"/>
            <field id="Description"/>
         </fields>
         <conditions>
            <condition type="blank" value="null" field="Id" operator="=" enclosevalueinquotes="false"/>
         </conditions>
         <actions/>
      </model>
      <model id="SelectedLead" limit="1" query="true" createrowifnonefound="false" sobject="Lead" forview="true">
         <fields>
            <field id="FirstName"/>
            <field id="LastName"/>
            <field id="Company"/>
            <field id="CreatedDate"/>
            <field id="LeadSource"/>
            <field id="Email"/>
            <field id="Status"/>
            <field id="Street"/>
            <field id="City"/>
            <field id="State"/>
            <field id="Country"/>
            <field id="Phone"/>
            <field id="MobilePhone"/>
            <field id="Title"/>
            <field id="IsConverted"/>
            <field id="Description"/>
            <field id="LastModifiedById"/>
            <field id="LastModifiedBy.Name"/>
            <field id="LastModifiedDate"/>
            <field id="Rating"/>
            <field id="PostalCode"/>
            <field id="NumberOfEmployees"/>
            <field id="OwnerId"/>
            <field id="Owner.Name" targetobjects="User"/>
            <field id="CreatedById"/>
            <field id="CreatedBy.Name"/>
            <field id="Fax"/>
            <field id="Website"/>
            <field id="Industry"/>
            <field id="AnnualRevenue"/>
         </fields>
         <conditions>
            <condition type="fieldvalue" value="" enclosevalueinquotes="true" field="Id" state="filterableoff" inactive="true" name="LeadId"/>
         </conditions>
         <actions/>
      </model>
      <model id="OpenTasks" limit="20" query="false" createrowifnonefound="false" orderby="SystemModstamp DESC" sobject="Task">
         <fields>
            <field id="Subject"/>
            <field id="WhoId"/>
            <field id="Priority"/>
            <field id="Status"/>
            <field id="ActivityDate"/>
            <field id="OwnerId"/>
            <field id="Owner.Name"/>
            <field id="ReminderDateTime"/>
            <field id="IsClosed"/>
            <field id="CallDisposition"/>
            <field id="CallType"/>
            <field id="Description"/>
            <field id="CreatedDate"/>
         </fields>
         <conditions>
            <condition type="fieldvalue" value="" field="WhoId" operator="=" mergefield="Id" enclosevalueinquotes="true" state="filterableoff" inactive="true" name="WhoId"/>
            <condition type="fieldvalue" value="false" enclosevalueinquotes="false" field="IsClosed" operator="="/>
         </conditions>
         <actions>
            <action>
               <actions>
                  <action type="save">
                     <models>
                        <model>LeadData</model>
                     </models>
                     <onerroractions>
                        <action type="cancel" message="There was an error" timeout="3000">
                           <models>
                              <model>LeadData</model>
                           </models>
                        </action>
                        <action type="requeryModel" message="There was an error" timeout="3000" model="LeadData"/>
                     </onerroractions>
                  </action>
                  <action type="requeryModel" model="LeadData"/>
               </actions>
               <events>
                  <event>models.saved</event>
               </events>
            </action>
         </actions>
      </model>
      <model id="TaskHistory" limit="20" query="false" createrowifnonefound="false" sobject="Task" orderby="ActivityDate DESC" queryallrows="true">
         <fields>
            <field id="OwnerId"/>
            <field id="Owner.Name"/>
            <field id="Type"/>
            <field id="Subject"/>
            <field id="Status"/>
            <field id="Priority"/>
            <field id="ActivityDate"/>
            <field id="Id"/>
            <field id="IsClosed"/>
            <field id="WhoId"/>
            <field id="Who.Name"/>
            <field id="Description"/>
            <field id="CallDurationInSeconds"/>
            <field id="CallDisposition"/>
            <field id="CallType"/>
         </fields>
         <conditions>
            <condition type="fieldvalue" value="" field="WhoId" operator="=" mergefield="Id" enclosevalueinquotes="true" state="filterableoff" inactive="true" name="WhoId"/>
            <condition type="fieldvalue" value="true" enclosevalueinquotes="false" field="IsClosed"/>
         </conditions>
         <actions/>
      </model>
   </models>
   <components>
      <pagetitle model="LeadData">
         <maintitle>
            <template>{{Model.LabelPlural}}</template>
         </maintitle>
         <actions>
            <action type="savecancel" label="New Action"/>
            <action type="redirect" label="Leads Queue" url="/apex/skuid__ui?page=LeadQueue" icon="ui-silk-application-side-list" window="self"/>
         </actions>
      </pagetitle>
      <skootable showconditions="true" showsavecancel="false" searchmethod="server" searchbox="true" showexportbuttons="true" pagesize="10" createrecords="true" model="LeadData" mode="read" tokenizesearch="true">
         <fields>
            <field id="FirstName"/>
            <field id="LastName"/>
            <field id="Company" allowordering="true"/>
            <field id="Phone"/>
            <field id="Email"/>
            <field id="Status"/>
            <field id="CreatedDate" allowordering="true"/>
            <field id="LeadSource" allowordering="true"/>
            <field id="OwnerId">
               <label>Owner</label>
            </field>
         </fields>
         <rowactions>
            <action type="edit"/>
            <action type="delete"/>
            <action type="redirect" label="Find Duplicates" url="/lead/leadmergewizard.jsp?retURL=%2F00Q%2Fo&amp;id={{Id}}" icon="ui-silk-group-delete" window="self"/>
            <action type="redirect" label="Send Email" url="/_ui/core/email/author/EmailAuthor?p2_lkid={{Id}}&amp;rtype=00Q&amp;retURL=%2F00Q%2Fo" icon="ui-silk-email-edit" window="self"/>
            <action type="multi" label="View Full Profile and Activities for {{FirstName}} {{LastName}}{{#Tasks}}\n (1+ Open Tasks){{/Tasks}}" icon="{{#Tasks}}ui-silk-clock-red{{/Tasks}}{{^Tasks}}sk-icon-photoview{{/Tasks}}">
               <actions>
                  <action type="blockUI" message="Loading Lead Profile and related Tasks..."/>
                  <action type="cancel">
                     <models>
                        <model>SelectedLead</model>
                        <model>OpenTasks</model>
                        <model>TaskHistory</model>
                     </models>
                     <onerroractions/>
                  </action>
                  <action type="setCondition" model="SelectedLead" condition="LeadId" value="{{{Id}}}"/>
                  <action type="setCondition" model="OpenTasks" condition="WhoId" value="{{{Id}}}"/>
                  <action type="setCondition" model="TaskHistory" condition="WhoId" value="{{{Id}}}"/>
                  <action type="requeryModels" model="TaskHistory">
                     <onerroractions/>
                     <models>
                        <model>SelectedLead</model>
                        <model>OpenTasks</model>
                        <model>TaskHistory</model>
                     </models>
                  </action>
                  <action type="showPopup">
                     <popup title="View / Add Tasks for {{{FirstName}}} {{{LastName}}} - {{{Company}}}" width="80%">
                        <components>
                           <pagetitle model="LeadData">
                              <maintitle>{{FirstName}} {{LastName}}{{#Company}} - {{Company}}{{/Company}}</maintitle>
                              <subtitle>
                                 <template>{{Model.Label}}</template>
                              </subtitle>
                              <actions>
                                 <action type="multi" label="Save and Close" window="self" icon="sk-icon-save">
                                    <hotkeys>
                                       <hotkey modifiers="ctrl" key="s" ignoretextinputs="false"/>
                                       <hotkey modifiers="meta" key="s"/>
                                    </hotkeys>
                                    <actions>
                                       <action type="blockUI" message="Saving..."/>
                                       <action type="save">
                                          <onerroractions>
                                             <action type="unblockUI" message="There was an error" timeout="3000"/>
                                          </onerroractions>
                                          <models>
                                             <model>SelectedLead</model>
                                             <model>OpenTasks</model>
                                             <model>TaskHistory</model>
                                          </models>
                                       </action>
                                       <action type="closeTopmostPopup"/>
                                       <action type="unblockUI"/>
                                    </actions>
                                 </action>
                                 <action type="multi" label="Close" window="self" icon="sk-icon-cancel">
                                    <hotkeys>
                                       <hotkey modifiers="meta" key="z" ignoretextinputs="true"/>
                                       <hotkey modifiers="ctrl" key="z" ignoretextinputs="true"/>
                                    </hotkeys>
                                    <actions>
                                       <action type="cancel">
                                          <models>
                                             <model>SelectedLead</model>
                                             <model>OpenTasks</model>
                                             <model>TaskHistory</model>
                                          </models>
                                       </action>
                                       <action type="closeAllPopups"/>
                                    </actions>
                                 </action>
                              </actions>
                              <conditions>
                                 <condition type="contextrow" field="Id" autocreated="true"/>
                              </conditions>
                           </pagetitle>
                           <tabset rememberlastusertab="true" defertabrendering="true">
                              <tabs>
                                 <tab name="Activities" icon="ui-silk-telephone">
                                    <components>
                                       <template model="OpenTasks" multiple="true" allowhtml="true">
                                          <contents>&lt;div class="nx-editor-header-title"&gt;Open Tasks&lt;/div&gt;</contents>
                                       </template>
                                       <skootable showconditions="true" showsavecancel="false" searchmethod="server" searchbox="true" showexportbuttons="false" pagesize="10" createrecords="true" model="OpenTasks" mode="read">
                                          <fields>
                                             <field id="OwnerId" type="">
                                                <label>Assigned To</label>
                                                <filters>
                                                   <filter enclosevalueinquotes="false" type="fieldvalue" field="IsActive" value="true"/>
                                                   <filter enclosevalueinquotes="true" type="fieldvalue" field="Profile.UserLicense.LicenseDefinitionKey" value="SFDC"/>
                                                </filters>
                                                <searchfields/>
                                             </field>
                                             <field id="Subject" columnwidth="25%"/>
                                             <field id="Status"/>
                                             <field id="Priority"/>
                                             <field id="ActivityDate">
                                                <label>Activity Date</label>
                                             </field>
                                             <field id="ReminderDateTime">
                                                <label>Reminder</label>
                                             </field>
                                          </fields>
                                          <rowactions>
                                             <action type="edit"/>
                                             <action type="delete"/>
                                             <action type="multi" label="Mark Completed" icon="ui-silk-tick">
                                                <actions>
                                                   <action type="blockUI" message="Marking Task as Completed..."/>
                                                   <action type="updateRow" fieldmodel="OpenTasks" field="Status" enclosevalueinquotes="true" value="Completed"/>
                                                   <action type="save">
                                                      <onerroractions>
                                                         <action type="blockUI" message="There was an error marking this Task as Completed." timeout="2000"/>
                                                      </onerroractions>
                                                      <models>
                                                         <model>TaskHistory</model>
                                                         <model>OpenTasks</model>
                                                      </models>
                                                   </action>
                                                   <action type="requeryModels">
                                                      <models>
                                                         <model>TaskHistory</model>
                                                         <model>OpenTasks</model>
                                                      </models>
                                                   </action>
                                                   <action type="unblockUI"/>
                                                </actions>
                                                <renderconditions>
                                                   <rendercondition type="fieldvalue" operator="!=" enclosevalueinquotes="false" field="IsClosed" value="true"/>
                                                   <rendercondition type="blank" operator="!=" field="CreatedDate" value="null" enclosevalueinquotes="false"/>
                                                </renderconditions>
                                             </action>
                                             <action type="drawer" label="View Conversation Details" icon="ui-silk-comments">
                                                <drawer width="80%">
                                                   <components>
                                                      <basicfieldeditor showheader="true" showsavecancel="false" model="OpenTasks" buttonposition="" mode="read" layout="above">
                                                         <columns>
                                                            <column width="100%">
                                                               <sections>
                                                                  <section title="Comments" collapsible="no">
                                                                     <fields>
                                                                        <field id="Description">
                                                                           <label/>
                                                                        </field>
                                                                     </fields>
                                                                  </section>
                                                               </sections>
                                                            </column>
                                                         </columns>
                                                         <conditions>
                                                            <condition type="contextrow" field="Id" mergefield="Id"/>
                                                         </conditions>
                                                         <renderconditions/>
                                                      </basicfieldeditor>
                                                   </components>
                                                </drawer>
                                                <renderconditions/>
                                             </action>
                                          </rowactions>
                                          <massactions usefirstitemasdefault="true">
                                             <action type="multi" label="Mark Completed" icon="ui-silk-tick">
                                                <actions>
                                                   <action type="blockUI" message="Marking Tasks as Completed..."/>
                                                   <action type="updateRow" fieldmodel="OpenTasks" field="Status" enclosevalueinquotes="true" value="Completed"/>
                                                   <action type="save">
                                                      <onerroractions>
                                                         <action type="blockUI" message="There was an error marking these Tasks as Completed." timeout="2000"/>
                                                      </onerroractions>
                                                      <models>
                                                         <model>TaskHistory</model>
                                                         <model>OpenTasks</model>
                                                      </models>
                                                   </action>
                                                   <action type="requeryModels">
                                                      <models>
                                                         <model>TaskHistory</model>
                                                         <model>OpenTasks</model>
                                                      </models>
                                                   </action>
                                                   <action type="unblockUI"/>
                                                </actions>
                                                <hotkeys>
                                                   <hotkey modifiers="shift" key="return" ignoretextinputs="true"/>
                                                </hotkeys>
                                             </action>
                                             <action type="massupdate"/>
                                             <action type="massdelete"/>
                                          </massactions>
                                          <views>
                                             <view type="standard"/>
                                          </views>
                                          <actions defaultlabel="Global Actions" defaulticon="ui-silk-wand" usefirstitemasdefault="true">
                                             <action type="multi" label="New Follow-up Task" icon="ui-silk-clock-add">
                                                <actions>
                                                   <action type="createRow" defaultmodefornewitems="edit" model="OpenTasks">
                                                      <defaults>
                                                         <default type="fieldvalue" value="Follow up with {{$Model.SelectedLead.data.0.FirstName}} {{$Model.SelectedLead.data.0.LastName}}" operator="=" field="Subject"/>
                                                         <default type="fieldvalue" value="TOMORROW" operator="=" field="ActivityDate"/>
                                                         <default type="fieldvalue" value="Normal" operator="=" field="Priority"/>
                                                         <default type="fieldvalue" value="New" operator="=" field="Status"/>
                                                         <default type="fieldvalue" value="{{$Model.RunningUser.data.0.Id}}" operator="=" field="OwnerId"/>
                                                         <default type="fieldvalue" value="TOMORROW" operator="=" field="ReminderDateTime"/>
                                                      </defaults>
                                                   </action>
                                                </actions>
                                             </action>
                                             <action type="redirect" label="Send Email" url="/_ui/core/email/author/EmailAuthor?p2_lkid={{$Model.SelectedLead.data.0.Id15}}&amp;rtype=00Q&amp;retURL=%2F{{$Model.SelectedLead.labelPlural}}%2Fo" icon="ui-silk-email-go" window="self"/>
                                          </actions>
                                       </skootable>
                                       <template model="TaskHistory" multiple="true" allowhtml="true">
                                          <contents>&lt;div class="nx-editor-header-title"&gt;Completed Tasks&lt;/div&gt;</contents>
                                       </template>
                                       <skootable showconditions="true" showsavecancel="false" searchmethod="server" searchbox="true" showexportbuttons="false" pagesize="10" createrecords="true" model="TaskHistory" mode="read">
                                          <fields>
                                             <field id="OwnerId" type="" required="true">
                                                <label>Assigned To</label>
                                                <filters>
                                                   <filter enclosevalueinquotes="false" type="fieldvalue" field="IsActive" value="true"/>
                                                   <filter enclosevalueinquotes="true" type="fieldvalue" field="Profile.UserLicense.LicenseDefinitionKey" value="SFDC"/>
                                                </filters>
                                                <searchfields/>
                                             </field>
                                             <field id="Subject"/>
                                             <field id="Status"/>
                                             <field id="Priority"/>
                                             <field id="ActivityDate" allowordering="true">
                                                <label>Activity Date</label>
                                             </field>
                                          </fields>
                                          <rowactions>
                                             <action type="edit"/>
                                             <action type="delete"/>
                                             <action type="popup" label="View Full Conversation" icon="ui-silk-comments">
                                                <popup width="80%" title="Task Details">
                                                   <components>
                                                      <basicfieldeditor showheader="true" showsavecancel="false" model="TaskHistory" buttonposition="" mode="read" layout="above">
                                                         <columns>
                                                            <column width="33.3%">
                                                               <sections>
                                                                  <section title="" collapsible="no">
                                                                     <fields>
                                                                        <field id="CallDisposition"/>
                                                                     </fields>
                                                                  </section>
                                                               </sections>
                                                               <renderconditions>
                                                                  <rendercondition type="blank" operator="!=" field="CallDisposition" value="null" enclosevalueinquotes="false"/>
                                                               </renderconditions>
                                                            </column>
                                                            <column width="33.3%">
                                                               <sections>
                                                                  <section title="" collapsible="no">
                                                                     <fields>
                                                                        <field id="CallType"/>
                                                                     </fields>
                                                                  </section>
                                                               </sections>
                                                               <renderconditions>
                                                                  <rendercondition type="blank" operator="!=" field="CallType" value="null" enclosevalueinquotes="false"/>
                                                               </renderconditions>
                                                            </column>
                                                            <column width="33.3%">
                                                               <sections>
                                                                  <section title="" collapsible="no">
                                                                     <fields>
                                                                        <field id="CallDurationInSeconds"/>
                                                                     </fields>
                                                                  </section>
                                                               </sections>
                                                               <renderconditions>
                                                                  <rendercondition type="blank" operator="!=" field="CallDurationInSeconds" value="null" enclosevalueinquotes="false"/>
                                                               </renderconditions>
                                                            </column>
                                                         </columns>
                                                      </basicfieldeditor>
                                                      <basicfieldeditor showheader="true" showsavecancel="false" model="TaskHistory" buttonposition="" mode="read" layout="above">
                                                         <columns>
                                                            <column width="100%">
                                                               <sections>
                                                                  <section title="Comments" collapsible="no">
                                                                     <fields>
                                                                        <field id="Description">
                                                                           <label/>
                                                                        </field>
                                                                     </fields>
                                                                  </section>
                                                               </sections>
                                                            </column>
                                                         </columns>
                                                         <conditions>
                                                            <condition type="contextrow" field="Id" mergefield="Id"/>
                                                         </conditions>
                                                         <renderconditions/>
                                                      </basicfieldeditor>
                                                   </components>
                                                </popup>
                                                <renderconditions/>
                                             </action>
                                          </rowactions>
                                          <massactions usefirstitemasdefault="true">
                                             <action type="massupdate"/>
                                             <action type="massdelete"/>
                                          </massactions>
                                          <views>
                                             <view type="standard"/>
                                          </views>
                                          <actions defaultlabel="Global Actions" defaulticon="ui-silk-wand" usefirstitemasdefault="true">
                                             <action type="multi" label="Log EMAIL" icon="ui-silk-email">
                                                <actions>
                                                   <action type="createRow" defaultmodefornewitems="edit" model="TaskHistory">
                                                      <defaults>
                                                         <default type="fieldvalue" value="Email: " operator="=" field="Subject"/>
                                                         <default type="fieldvalue" value="{{{Id}}}" operator="=" field="WhoId"/>
                                                         <default type="fieldvalue" value="{{$Model.RunningUser.data.0.Id}}" operator="=" field="OwnerId"/>
                                                         <default type="fieldvalue" value="Completed" operator="=" field="Status"/>
                                                         <default type="fieldvalue" value="Normal" operator="=" field="Priority"/>
                                                         <default type="fieldvalue" value="TODAY" operator="=" field="ActivityDate"/>
                                                      </defaults>
                                                   </action>
                                                </actions>
                                                <hotkeys>
                                                   <hotkey modifiers="" key="f1" ignoretextinputs="false"/>
                                                </hotkeys>
                                             </action>
                                             <action type="multi" label="Log PHONE CALL" icon="ui-silk-phone-sound">
                                                <actions>
                                                   <action type="createRow" model="TaskHistory">
                                                      <defaults>
                                                         <default type="fieldvalue" value="Phone Call with {{$Model.SelectedLead.data.0.FirstName}}: " operator="=" field="Subject"/>
                                                         <default type="fieldvalue" value="{{{Id}}}" operator="=" field="WhoId"/>
                                                         <default type="fieldvalue" value="{{$Model.RunningUser.data.0.Id}}" operator="=" field="OwnerId"/>
                                                         <default type="fieldvalue" value="Completed" operator="=" field="Status"/>
                                                         <default type="fieldvalue" value="Normal" operator="=" field="Priority"/>
                                                         <default type="fieldvalue" value="TODAY" operator="=" field="ActivityDate"/>
                                                      </defaults>
                                                   </action>
                                                </actions>
                                                <hotkeys>
                                                   <hotkey modifiers="" key="f2" ignoretextinputs="false"/>
                                                </hotkeys>
                                             </action>
                                             <action type="multi" label="Log WEB MEETING" icon="ui-silk-computer-link">
                                                <actions>
                                                   <action type="createRow" defaultmodefornewitems="edit" model="TaskHistory">
                                                      <defaults>
                                                         <default type="fieldvalue" value="Web Meeting with {{$Model.SelectedLead.data.0.FirstName}}" operator="=" field="Subject"/>
                                                         <default type="fieldvalue" value="{{{Id}}}" operator="=" field="WhoId"/>
                                                         <default type="fieldvalue" value="{{$Model.RunningUser.data.0.Id}}" operator="=" field="OwnerId"/>
                                                         <default type="fieldvalue" value="Completed" operator="=" field="Status"/>
                                                         <default type="fieldvalue" value="Normal" operator="=" field="Priority"/>
                                                         <default type="fieldvalue" value="TODAY" operator="=" field="ActivityDate"/>
                                                      </defaults>
                                                   </action>
                                                </actions>
                                                <hotkeys>
                                                   <hotkey modifiers="" key="f3" ignoretextinputs="false"/>
                                                </hotkeys>
                                             </action>
                                          </actions>
                                       </skootable>
                                    </components>
                                 </tab>
                                 <tab name="Profile" icon="ui-silk-star">
                                    <components>
                                       <basicfieldeditor showsavecancel="false" showheader="true" model="SelectedLead" mode="read">
                                          <columns>
                                             <column width="33.3%">
                                                <sections>
                                                   <section title="Basics">
                                                      <fields>
                                                         <field id="FirstName"/>
                                                         <field id="LastName"/>
                                                         <field id="Company"/>
                                                         <field id="Title"/>
                                                      </fields>
                                                   </section>
                                                   <section title="Contact Information">
                                                      <fields>
                                                         <field id="Email"/>
                                                         <field id="Phone">
                                                            <label>Business Phone</label>
                                                         </field>
                                                         <field id="MobilePhone"/>
                                                         <field type="COMBO" allowhtml="true">
                                                            <label>Address</label>
                                                            <template>{{Street}} &lt;br&gt;
{{City}}{{#City}},{{/City}} {{State}} &lt;br&gt;
{{Country}}  
{{PostalCode}}

</template>
                                                         </field>
                                                      </fields>
                                                   </section>
                                                </sections>
                                             </column>
                                             <column width="33.3%">
                                                <sections>
                                                   <section title="Lead Information">
                                                      <fields>
                                                         <field id="Description"/>
                                                         <field id="LeadSource"/>
                                                         <field id="Status"/>
                                                         <field id="Rating"/>
                                                      </fields>
                                                   </section>
                                                </sections>
                                             </column>
                                             <column width="33.3%">
                                                <sections>
                                                   <section title="Company Information">
                                                      <fields>
                                                         <field id="Website"/>
                                                         <field id="Industry"/>
                                                         <field id="NumberOfEmployees"/>
                                                         <field id="AnnualRevenue"/>
                                                      </fields>
                                                   </section>
                                                   <section title="System Information">
                                                      <fields>
                                                         <field id="OwnerId"/>
                                                         <field id="CreatedDate"/>
                                                         <field type="COMBO">
                                                            <label>Last Modified By</label>
                                                            <template>{{LastModifiedById}}, {{LastModifiedDate}}</template>
                                                         </field>
                                                      </fields>
                                                   </section>
                                                </sections>
                                             </column>
                                          </columns>
                                       </basicfieldeditor>
                                    </components>
                                 </tab>
                              </tabs>
                           </tabset>
                        </components>
                     </popup>
                  </action>
                  <action type="unblockUI"/>
               </actions>
               <renderconditions/>
            </action>
         </rowactions>
         <massactions usefirstitemasdefault="true">
            <action type="massupdate"/>
            <action type="massdelete"/>
         </massactions>
         <views>
            <view type="standard"/>
         </views>
         <filters>
            <filter type="select" filteroffoptionlabel="Any Lead Source" createfilteroffoption="true" condition="Lead Source">
               <sources>
                  <source type="metadata" prefix="Source: "/>
               </sources>
            </filter>
            <filter type="select" filteroffoptionlabel="Any Rating" createfilteroffoption="true" condition="Rating">
               <sources>
                  <source type="metadata"/>
               </sources>
            </filter>
            <filter type="select" filteroffoptionlabel="Any Status" createfilteroffoption="true" condition="Status">
               <sources>
                  <source type="metadata" prefix="Status: "/>
               </sources>
            </filter>
            <filter type="toggle" createfilteroffoption="true" label="My Leads">
               <effects>
                  <effect action="activate" value="" condition="Owner is me"/>
               </effects>
            </filter>
            <filter type="toggle" filteroffoptionlabel="Unread by Owner " createfilteroffoption="true" label="Unread by Owner">
               <effects>
                  <effect action="activate" value="" condition="IsUnreadByOwner"/>
               </effects>
            </filter>
            <filter type="select" filteroffoptionlabel="Show Leads from:" createfilteroffoption="true" affectcookies="true">
               <sources>
                  <source type="manual">
                     <options>
                        <option label="Today's Leads" type="complex">
                           <effects>
                              <effect action="activate" value="" condition="Today's Leads"/>
                           </effects>
                        </option>
                        <option label="Leads This Week" type="complex">
                           <effects>
                              <effect action="activate" value="" condition="Leads This Week"/>
                           </effects>
                        </option>
                        <option label="Leads This Month" type="complex">
                           <effects>
                              <effect action="activate" value="" condition="Leads This Month"/>
                           </effects>
                        </option>
                        <option label="Leads This Quarter" type="complex">
                           <effects>
                              <effect action="activate" value="" condition="Leads This Quarter"/>
                           </effects>
                        </option>
                        <option label="Leads This Year" type="complex">
                           <effects>
                              <effect action="activate" value="" condition="Leads This Year"/>
                           </effects>
                        </option>
                        <option label="Leads This Fiscal Year" type="complex">
                           <effects>
                              <effect action="activate" value="" condition="Leads This Fiscal Year"/>
                           </effects>
                        </option>
                     </options>
                  </source>
               </sources>
            </filter>
         </filters>
         <actions defaultlabel="Options" defaulticon="ui-silk-text-list-bullets" usefirstitemasdefault="true">
            <action type="multi" label="Create New Lead in Pop-up" icon="ui-silk-star">
               <actions>
                  <action type="cancel">
                     <models>
                        <model>NewLead</model>
                     </models>
                  </action>
                  <action type="createRow" model="NewLead">
                     <defaults>
                        <default type="fieldvalue" value="{{$Model.RunningUser.data.0.Id}}" operator="=" field="OwnerId"/>
                     </defaults>
                  </action>
                  <action type="showPopup">
                     <popup title="Create New Lead" width="1000">
                        <components>
                           <pagetitle model="NewLead">
                              <maintitle>New Lead{{#FirstName}}: {{FirstName}}{{/FirstName}}{{#LastName}} {{LastName}}{{/LastName}}{{#Company}} - {{Company}}{{/Company}}</maintitle>
                              <subtitle>
                                 <template>{{Model.Label}}</template>
                              </subtitle>
                              <actions>
                                 <action type="multi" label="Save" icon="ui-silk-accept" snippet="">
                                    <actions>
                                       <action type="blockUI" message="Saving new {{$Model.NewLead.label}}..."/>
                                       <action type="save">
                                          <models>
                                             <model>NewLead</model>
                                          </models>
                                          <onerroractions>
                                             <action type="unblockUI" message="There was an error" timeout="3000"/>
                                          </onerroractions>
                                       </action>
                                       <action type="save">
                                          <models>
                                             <model>LeadData</model>
                                          </models>
                                          <onerroractions>
                                             <action type="closeAllPopups" message="There was an error" timeout="3000"/>
                                             <action type="unblockUI" message="There was an error" timeout="3000"/>
                                             <action type="requeryModel" message="There was an error" timeout="3000" model="NewLead"/>
                                          </onerroractions>
                                       </action>
                                       <action type="requeryModels" model="LeadData">
                                          <models>
                                             <model>LeadData</model>
                                             <model>NewLead</model>
                                          </models>
                                       </action>
                                       <action type="closeAllPopups"/>
                                       <action type="unblockUI"/>
                                    </actions>
                                    <hotkeys>
                                       <hotkey modifiers="ctrl" key="s"/>
                                       <hotkey modifiers="meta" key="s"/>
                                    </hotkeys>
                                 </action>
                                 <action type="multi" label="Cancel" window="self" icon="sk-icon-cancel">
                                    <actions>
                                       <action type="cancel">
                                          <models>
                                             <model>NewLead</model>
                                          </models>
                                       </action>
                                       <action type="closeAllPopups"/>
                                    </actions>
                                 </action>
                              </actions>
                              <conditions>
                                 <condition type="contextrow" field="Id" mergefield="Id"/>
                              </conditions>
                           </pagetitle>
                           <basicfieldeditor showheader="true" showsavecancel="false" model="NewLead" mode="edit">
                              <columns>
                                 <column width="33.3%">
                                    <sections>
                                       <section title="Personal">
                                          <fields>
                                             <field id="OwnerId" required="true">
                                                <label>Owner</label>
                                                <filters/>
                                             </field>
                                             <field id="FirstName"/>
                                             <field id="LastName"/>
                                             <field id="Company"/>
                                             <field id="Title"/>
                                             <field id="Industry"/>
                                          </fields>
                                       </section>
                                    </sections>
                                 </column>
                                 <column width="33.3%">
                                    <sections>
                                       <section title="Contact">
                                          <fields>
                                             <field id="Phone"/>
                                             <field id="MobilePhone"/>
                                             <field id="Fax"/>
                                             <field id="Email"/>
                                             <field id="Website"/>
                                          </fields>
                                       </section>
                                    </sections>
                                 </column>
                                 <column width="33.3%">
                                    <sections>
                                       <section title="Address">
                                          <fields>
                                             <field id="Street"/>
                                             <field id="City"/>
                                             <field id="State"/>
                                             <field id="PostalCode"/>
                                             <field id="Country"/>
                                          </fields>
                                       </section>
                                    </sections>
                                 </column>
                              </columns>
                              <conditions>
                                 <condition type="contextrow" field="Id" mergefield="Id"/>
                              </conditions>
                           </basicfieldeditor>
                           <basicfieldeditor showheader="true" showsavecancel="false" model="NewLead" mode="edit">
                              <columns>
                                 <column width="50%">
                                    <sections>
                                       <section title="Company ">
                                          <fields>
                                             <field id="AnnualRevenue"/>
                                             <field id="LeadSource"/>
                                             <field id="Status"/>
                                             <field id="Rating"/>
                                             <field id="NumberOfEmployees"/>
                                          </fields>
                                       </section>
                                    </sections>
                                 </column>
                                 <column width="50%">
                                    <sections>
                                       <section title="Description">
                                          <fields>
                                             <field id="Description"/>
                                          </fields>
                                       </section>
                                    </sections>
                                 </column>
                              </columns>
                              <conditions>
                                 <condition type="contextrow" field="Id" mergefield="Id"/>
                              </conditions>
                           </basicfieldeditor>
                        </components>
                     </popup>
                  </action>
               </actions>
               <hotkeys>
                  <hotkey modifiers="ctrl" key="n"/>
                  <hotkey modifiers="meta" key="n"/>
               </hotkeys>
            </action>
            <action type="redirect" label="Create New Lead via Redirect" url="/{{Model.KeyPrefix}}/e" icon="ui-silk-star" window="self"/>
            <action type="redirect" label="Import Leads" url="/apex/skuid__Import?obj=Lead" icon="ui-silk-folder-star" window="self"/>
            <action type="redirect" label="Transfer Leads" url="/p/own/BulkTransfer?retURL=%2F00Q%2Fo&amp;ent=Lead" icon="ui-silk-transmit-go" window="self"/>
            <action type="redirect" label="Mass Email Leads" url="/ui/massmail/MassMailStageManager?setupid=MassMailFilter&amp;ftype=L&amp;wizardRetUrl=%2F00Q%2Fo" icon="ui-silk-email" window="self"/>
            <action type="popup" window="self" label="View Helpful Links" icon="ui-silk-application-link">
               <popup title="Helpful {{Model.Label}} Links" width="400">
                  <components>
                     <pagetitle model="LeadData">
                        <maintitle>Helpful Links</maintitle>
                        <subtitle>
                           <template>{{Model.Label}}</template>
                        </subtitle>
                        <actions/>
                     </pagetitle>
                     <panelset type="standard">
                        <panels>
                           <panel>
                              <components>
                                 <template model="LeadData" multiple="true" allowhtml="true">
                                    <contents>&lt;table class="nx-list nx-skootable-data" cellpadding="0" cellspacing="0"&gt;
&lt;tbody class="nx-list-contents"&gt;
&lt;tr class="nx-item"&gt;
&lt;td&gt;&lt;div style="white-space: nowrap; margin: 3px;"&gt;&lt;div class="buttonicon ui-silk-report ui-silk inline"&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
&lt;td&gt;
&lt;div class="nx-field"&gt;
&lt;div class="nx-fieldtext"&gt;
&lt;a href="/00O?rt=21&amp;retURL=%2F00O&amp;pc0=EMAIL_BOUNCED_REASON&amp;pn0=ne&amp;pv0=&amp;sort=EM&amp;c=FN&amp;c=LN&amp;c=CO&amp;c=EM&amp;c=OW&amp;c=EMAIL_BOUNCED_REASON&amp;c=EMAIL_BOUNCED_DATE&amp;details=yes"&gt;Lead List Report &lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class="nx-item"&gt;
&lt;td&gt;&lt;div style="white-space: nowrap; margin: 3px;"&gt;&lt;div class="buttonicon ui-silk-report ui-silk inline"&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
&lt;td&gt;
&lt;div class="nx-field"&gt;
&lt;div class="nx-fieldtext"&gt;
&lt;a href="/00O?rt=96&amp;retURL=%2F00O&amp;sortdir=down&amp;sort=CD&amp;break0=LI&amp;c=FN&amp;c=LN&amp;c=OW&amp;c=CR&amp;c=FD&amp;c=OV&amp;c=NV&amp;c=CD&amp;details=yes&amp;format=t"&gt;Lead History Report&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class="nx-item"&gt;
&lt;td&gt;&lt;div style="white-space: nowrap; margin: 3px;"&gt;&lt;div class="buttonicon ui-silk-report ui-silk inline"&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
&lt;td&gt;
&lt;div class="nx-field"&gt;
&lt;div class="nx-fieldtext"&gt;
&lt;a href="/00O?rt=28&amp;retURL=%2F00O&amp;scope=use&amp;s=AM&amp;c=CD&amp;c=LS&amp;c=FN&amp;c=LN&amp;c=LU&amp;c=CA&amp;c=CND&amp;c=SU&amp;c=OW&amp;c=OP&amp;c=OA&amp;c=CLD&amp;c=OO&amp;details=yes"&gt;Lead Lifetime Report&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class="nx-item"&gt;
&lt;td&gt;&lt;div style="white-space: nowrap; margin: 3px;"&gt;&lt;div class="buttonicon ui-silk-report ui-silk inline"&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
&lt;td&gt;
&lt;div class="nx-field"&gt;
&lt;div class="nx-fieldtext"&gt;
&lt;a href="/00O?rt=20&amp;retURL=%2F00O&amp;function=c&amp;date=w&amp;break0=CREATED_DATE&amp;new_break=w_CREATED_DATE&amp;pivot=STATUS&amp;scope=user&amp;colDt=CREATED_DATE&amp;hidden=STREET_LINE1&amp;hidden=STREET_LINE2&amp;hidden=STREET_LINE3&amp;hidden=ANNUAL_REVENUE.CONVERT&amp;t=title_LeadChartReport&amp;details=no&amp;format=t"&gt;Lead Status Report &lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class="nx-item"&gt;
&lt;td&gt;&lt;div style="white-space: nowrap; margin: 3px;"&gt;&lt;div class="buttonicon ui-silk-report ui-silk inline"&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
&lt;td&gt;
&lt;div class="nx-field"&gt;
&lt;div class="nx-fieldtext"&gt;
&lt;a href="/00O?rt=20&amp;retURL=%2F00O&amp;function=c&amp;date=d&amp;break0=LEAD_SOURCE&amp;new_break=LEAD_SOURCE&amp;pivot=STATUS&amp;scope=user&amp;colDt=CREATED_DATE&amp;hidden=STREET_LINE1&amp;hidden=STREET_LINE2&amp;hidden=STREET_LINE3&amp;hidden=ANNUAL_REVENUE.CONVERT&amp;t=title_LeadsBySourceReport&amp;details=no&amp;format=t"&gt;Lead By Source&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class="nx-item"&gt;
&lt;td&gt;&lt;div style="white-space: nowrap; margin: 3px;"&gt;&lt;div class="buttonicon ui-silk-report ui-silk inline"&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
&lt;td&gt;
&lt;div class="nx-field"&gt;
&lt;div class="nx-fieldtext"&gt;
&lt;a href="/00O?rt=21&amp;retURL=%2F00O&amp;pc0=LAST_ACTIVITY&amp;pn0=lt&amp;colDt=CREATED_DATE&amp;sort=LAST_ACTIVITY&amp;c=FN&amp;c=LN&amp;c=TI&amp;c=CO&amp;c=EM&amp;c=LS&amp;c=ST&amp;c=RT&amp;c=OW&amp;c=LA&amp;details=yes"&gt;Lead Last Activity &gt; 30 Days&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;

&lt;/table&gt;</contents>
                                 </template>
                              </components>
                           </panel>
                        </panels>
                     </panelset>
                  </components>
               </popup>
            </action>
         </actions>
         <searchfields/>
      </skootable>
   </components>
   <resources>
      <labels/>
      <css/>
      <javascript>
         <jsitem location="inlinesnippet" name="saveNewItemsInPopup" cachelocation="false" url="">var $ = skuid.$,
    params = arguments[0],
    component = params.component,
    popup = component.editor.element.closest('.ui-dialog-content'),
    modelsToSave = [],
    objLabelsToSave = [],
    uniqueModels = {};

popup.children().each(function(){
    var obj = $(this).data('object');
    if (obj &amp;&amp; obj.model &amp;&amp; !uniqueModels[obj.model.id]) {
        var model = obj.model;
        modelsToSave.push(model);
        if (model.data &amp;&amp; model.data.length) {
            if (model.data.length&gt;1) {
                objLabelsToSave.push(model.labelPlural);
            } else {
                objLabelsToSave.push(model.label);
            }
        }
        uniqueModels[obj.model.id] = 1;
    }
});

var message = 'Saving new ';
if (objLabelsToSave.length &lt; 3) {
    message += objLabelsToSave.join(' and ');
} else {
    var lastObj = objLabelsToSave.pop();
    message += objLabelsToSave.join(', ');
    message += ', and ' + lastObj;
}
message += '...';
popup.block({
    message: message
});

skuid.model.save(modelsToSave,{callback:function(result){
    if (result.totalsuccess){

        // Refresh the data in related Models on the page
        var uniqueRelatedObjectsToCheck = {},
            relatedModelsToUpdate = [];

        $.each(modelsToSave,function(){
            if (this.objectName &amp;&amp; !uniqueRelatedObjectsToCheck[this.objectName]) {
                uniqueRelatedObjectsToCheck[this.objectName] = 1;
            }
        });

        // Loop over all Models,
        // including the Models we've already saved,
        // and find ones that are on the same objects as the ones we've already saved.
        // Update them if they do not have unsaved changes.
        $.each(skuid.model.list(),function(){
            if (uniqueRelatedObjectsToCheck[this.objectName]
            &amp;&amp; !this.hasChanged) {
                relatedModelsToUpdate.push(this);
            }
        });
        
        $.when(skuid.model.updateData(relatedModelsToUpdate)).then(function(){
            $.each(popup.children(),function(){
                var obj = $(this).data('component');
                if (obj &amp;&amp; obj.unregister) obj.unregister();
            });
            popup.dialog('destroy');

            // Create new Rows in our Models to Save,
            // to prepare for the NEXT time someone creates a new record
            $.each(modelsToSave,function(){
                this.createRow();
            });

        });
    } else {
        popup.unblock();
    }
}});</jsitem>
      </javascript>
   </resources>
</skuidpage>
